<!DOCTYPE html>
<html>
    <head>
                <title>PaSh: Light-touch Data-Parallel Shell Scripting</title>
                <meta charset="utf-8">
        <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400">
        <style type="text/css">code{white-space: pre;}</style>
        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <style type="text/css">
.twoWrapper { display: table;  width: 100%;}
.twoLeft { display: table-cell; width: 70%; }
.twoRight { display: table-cell; width: 30%; }
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
    margin: 0; padding: 0; vertical-align: baseline; border: none; }
  table.sourceCode { width: 100%; line-height: 100%; }
  td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
  td.sourceCode { padding-left: 5px; }
  code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
  code > span.dt { color: #902000; } /* DataType */
  code > span.dv { color: #40a070; } /* DecVal */
  code > span.bn { color: #40a070; } /* BaseN */
  code > span.fl { color: #40a070; } /* Float */
  code > span.ch { color: #4070a0; } /* Char */
  code > span.st { color: #4070a0; } /* String */
  code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
  code > span.ot { color: #007020; } /* Other */
  code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
  code > span.fu { color: #06287e; } /* Function */
  code > span.er { color: #ff0000; font-weight: bold; } /* Error */
  code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  code > span.cn { color: #880000; } /* Constant */
  code > span.sc { color: #4070a0; } /* SpecialChar */
  code > span.vs { color: #4070a0; } /* VerbatimString */
  code > span.ss { color: #bb6688; } /* SpecialString */
  code > span.im { } /* Import */
  code > span.va { color: #19177c; } /* Variable */
  code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
  code > span.op { color: #666666; } /* Operator */
  code > span.bu { } /* BuiltIn */
  code > span.ex { } /* Extension */
  code > span.pp { color: #bc7a00; } /* Preprocessor */
  code > span.at { color: #7d9029; } /* Attribute */
  code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
  code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
  code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
  code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
        </style>
                                <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
        </style>
                        <link rel="stylesheet" href="../../utils/css/main.css">
                          
 <link rel="stylesheet" type="text/css" href="../../utils/css/mystyle.css" media="screen" />
 <link rel="stylesheet" type="text/css" href="../../utils/fbox/jquery.fancybox.css?v=2.1.5" media="screen" />
 <link rel="stylesheet" type="text/css" href="../../utils/fbox/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
 <link rel="stylesheet" type="text/css" href="../../utils/fbox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" />              
    </head>
    <body>
        <div class="container-fluid">
            <header>
                <div class="column">
                    <div class="navigation">
                        <a class="self" href="../tutorial/index.html">tutorial</a> /
                        <a href="../index.html">docs</a>  /
                        <a href="../benchmarks/index.html">benchmarks</a> /
                        <a href="http://github.com/binpash">github</a>
                    </div>
                    <div class="breadcrumb">
                        <a href="/web">
                            <img class="logo" src=../../utils/img/pash_logo2.jpg width="15%"/>
                        </a>
                        <!-- <a style="vertical-align: text-top;" href="/">PaSh</a> -->
                    </div>
                </div>
            </header>
                        <section id="commits-commit-messages" class="level2">
<h2>Commits &amp; Commit Messages</h2>
<p>Here are a few important guidelines w.r.t to <code>git</code> and GitHub:</p>
<ol type="1">
<li><p>Push your work in a separate branch and create a PR when ready. PRs are always <em>squashed</em> so you can push as many corrections as you want to a PR.</p></li>
<li><p>Strive for <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">clear and short commit messages</a>. At a minimum, start with an 80-character summary, with verbs in present tense.</p></li>
<li><p>Add the <code>--signoff</code> or <code>-s</code> flag to <code>git commit</code>. This flag is intended to certify that you have created the patch in question, or that you certify that to the best of your knowledge, it was created under an appropriate open-source license, or that it has been provided to you by someone else under those terms.</p></li>
</ol>
<blockquote>
<p>To admins: You can always add <code>Signed-off-by: Name &lt;email&gt;</code> when squashing commits.</p>
</blockquote>
</section>
<section id="pash-on-docker-a-pocket-guide" class="level2">
<h2>PaSh on Docker: A Pocket Guide</h2>
<p>This is a pocket guide for running PaSh in a docker container.</p>
<section id="loading-image" class="level3">
<h3>Loading image</h3>
<p>The following will pull and launch the latest image (tag: <code>pash:latest</code>) using the name <code>pash-play</code></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="ex">docker</span> pull binpash/pash</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="ex">docker</span> run --name pash-play -it pash</a></code></pre></div>
<p>This will use <code>pash-play</code> for the container (to be able to start/stop it later) and <code>-it</code> runs it interactively (subsuming the next command).</p>
<p>To restart after you exit, run <code>docker start -i pash-play</code> (flag <code>-i</code> starts it interactively.)</p>
</section>
<section id="customizing-image" class="level3">
<h3>Customizing image</h3>
<p>To be used for continuous integration and testing, this image has been configured to have <em>read-only</em> access to the repo through a different user. To get write access, update the name and email used for <code>git</code> commits with your name and email, and <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">generate an ssh key pair</a>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="fu">git</span> config --global user.name <span class="st">&quot;FIRST_NAME LAST_NAME&quot;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="fu">git</span> config --global user.email <span class="st">&quot;YOUR_EMAIL@example.com&quot;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="fu">ssh-keygen</span> -t rsa -b 4096 -C <span class="st">&quot;YOUR_EMAIL@example.com&quot;</span></a></code></pre></div>
<p>Finally, <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account">add the key to your GitHub account</a>.</p>
</section>
<section id="basic-docker-commands" class="level3">
<h3>Basic Docker commands</h3>
<p>This is a small list of useful docker commands. Docker distinguishes between an image (a pre-setup environment) and a container (a running or stopped instance of an image, created with <code>run</code>). <code>NN</code> below refers to the name of the container, provided to <code>run</code>. Containers are always identified uniquely by a sha256 string, which can be useful if no name is given.</p>
<pre><code>docker images                    # shows all images in the system
docker ps -a | grep pash         # shows all containers with name pash
docker run --name NN pash/18.04  # creates a writable container (add `-it` for interactive)
docker start -i NN               # starts container (add `-i` to drop straight into shell)
docker attach NN                 # non-interactive -&gt; interactive
&lt;CTL+p&gt;, then &lt;CTL+q&gt;            # interactive -&gt; non-interactive
docker cp A B                    # copy host&lt;-&gt;container; A B can be `NN:/x/y/z` or `lo/c/al`</code></pre>
<p>Useful options for <code>docker run</code>:</p>
<ul>
<li><a href="https://docs.docker.com/storage/bind-mounts/">Mount host storage</a>: <code>-v /HST:/IN/NN</code></li>
<li><a href="https://docs.docker.com/config/containers/resource_constraints/">Limit CPU/Mem</a>: <code>--cpus='.5' --mem=1g</code></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/run/#set-storage-driver-options-per-container">Limit disk size</a>: <code>--storage-opt size=10G</code></li>
</ul>
</section>
</section>
<section id="installing-wsl-on-windows" class="level2">
<h2>Installing WSL on Windows</h2>
<p>To run PaSh on Windows without Docker, a user needs to install WSL (Windows Subsystem for Linux). WSL lets developers run a GNU/Linux environment — including most command-line tools, utilities, and applications — directly on Windows, unmodified, without the need to setup a traditional virtual machine or use dualboot.</p>
<p><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">Microsoft docs</a> and <a href="https://github.com/MicrosoftDocs/WSL/blob/master/WSL/troubleshooting.md">troubleshooting</a> detail the installation process; below is a short guide. <em>All commands below should be run in an Administrator Poweshell prompt.</em></p>
<section id="windows-10-preview-build-20262-or-higher" class="level4">
<h4>Windows 10 Preview build 20262 or higher</h4>
<p>List the available Linux Distributions. <em>Note that currently only Ubuntu, Debian and Fedora are supported by PaSh</em></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb4-1" title="1">wsl --list --online</a></code></pre></div>
<p>Install WSL2 with with a given distribution</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb5-1" title="1">wsl --install -d &lt;distribution-name-from-above&gt;</a></code></pre></div>
<p>Restart your machine</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb6-1" title="1"><span class="fu">Restart-Computer</span></a></code></pre></div>
</section>
<section id="everyone-else-most-people" class="level4">
<h4>Everyone else (most people)</h4>
<p>Enable WSL:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb7-1" title="1">dism.<span class="fu">exe</span> /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart</a></code></pre></div>
<p>Enable Virtual Machine Platform (required for Hyper-V and WSL2):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb8-1" title="1">dism.<span class="fu">exe</span> /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart</a></code></pre></div>
<p>Restart your machine:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb9-1" title="1"><span class="fu">Restart-Computer</span></a></code></pre></div>
<p>Update WSL to WSL2. Download the WSL-to-WSL2 updater and run it:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb10-1" title="1">(<span class="fu">New-Object</span> System.<span class="fu">Net</span>.<span class="fu">WebClient</span>).<span class="fu">DownloadFile</span>(<span class="st">&quot;https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi&quot;</span>, <span class="st">&quot;C:/Windows/Temp/wsl2.msi&quot;</span>);</a>
<a class="sourceLine" id="cb10-2" title="2">msiexec /i <span class="st">&quot;C:/Windows/Temp/wsl2.msi&quot;</span>;</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="fu">Remove-Item</span> <span class="st">&quot;C:/Windows/Temp/wsl2.msi&quot;</span></a></code></pre></div>
<p>Set WSL2 as default WSL version</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb11-1" title="1">wsl --set-default-version 2</a></code></pre></div>
<p>Install one of the Linux distributions on which PaSh has been tested from the Microsoft Store:</p>
<ul>
<li><a href="https://www.microsoft.com/store/apps/9N9TNGVNDL3Q">Ubuntu 18.04 LTS</a></li>
<li><a href="https://www.microsoft.com/store/apps/9n6svws3rx71">Ubuntu 20.04 LTS</a></li>
<li><a href="https://www.microsoft.com/store/apps/9MSVKQC78PK6">Debian GNU/Linux</a></li>
<li><a href="https://www.microsoft.com/store/apps/9n6gdm4k2hnc">Fedora Remix for WSL</a></li>
</ul>
<p>Restart your machine</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode powershell"><code class="sourceCode powershell"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">Restart-Computer</span></a></code></pre></div>
</section>
<section id="epilogue" class="level4">
<h4>Epilogue</h4>
<p>Run the <code>wsl</code> command (or find the installed Linux distribution in Windows Start menu and run it). After a few minutes of installation, enter a username and password for the internal WSL account to be created.</p>
<p>Continue the PaSh installation process from <a href="https://github.com/binpash/pash/blob/main/docs/tutorial/tutorial.md#installation">here</a> inside the WSL installation.</p>
</section>
</section>
<section id="docker-todo" class="level2">
<h2>Docker TODO</h2>
</section>
<section id="using-gnu-screen" class="level2">
<h2>Using GNU Screen</h2>
<p>We often use GNU <code>screen</code>, a terminal multiplexer, for pair programming. GNU <code>screen</code> has two benefits: (1) it allows a session to continue executing even after one detaches and closes the terminal window, which is useful for executing long-running processes such as PaSh’s experiments; and (2) it allows multiple people to share a session, with the ability to read and write in the terminal window as if it was a single person.</p>
<p>Here are commands related to launching a screen session: * <code>screen</code> -&gt; start a new session * <code>screen -ls</code> -&gt; show all screen sessions in this machine * <code>screen -x &lt;ID&gt;</code> -&gt; attach to screen with id <code>&lt;ID&gt;</code>, as shown by <code>-ls</code> above. * <code>screen -x &lt;user&gt;/&lt;pash&gt;</code> -&gt; attach to session <code>pash</code> of user <code>user</code>, assuming it exists/running;</p>
<p>When in a <code>screen</code> session, all <code>screen</code>-related commands are prefixed by <code>ctr-a</code> (which means pressing <code>ctrl</code> and <code>a</code> <em>together</em>, and <em>then</em> pressing the followup character). Here are the 5 most useful commands: * <code>ctrl-a c</code> -&gt; create­a new window in the current session * <code>ctrl-a "</code> -&gt; show all windows and choose using up/down arrows * <code>ctr-a &lt;N&gt;</code> -&gt; go to window <N>, where <N> is 0..9 inclusive * <code>ctrl-a ctrl-a</code> -&gt; fast-toggle between latest windows * <code>ctrl-a d</code> -&gt; detach window, to exit without closing screen</p>
<p>A slightly more extended pocket guide <a href="https://gist.github.com/nvasilakis/826e4f88d0e0dba2adf4df4834cb9394">in this gist</a>.</p>
</section>
<section id="pushing-to-new-branches" class="level2">
<h2>Pushing to new branches</h2>
<p>To keep the main branch free of breakage, we often push technical work in new branches. To do this, from the main/master branch on your local machine:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="fu">git</span> checkout -b <span class="op">&lt;</span>NAME<span class="op">&gt;</span>    <span class="co"># create a new branch and switch to it</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="fu">git</span> push -u origin <span class="op">&lt;</span>NAME<span class="op">&gt;</span> <span class="co"># push the new branch as a new branch on github</span></a></code></pre></div>
<p>You can always fetch changes into the main/master:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="fu">git</span> checkout master        <span class="co"># switch to main/master</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="fu">git</span> pull                   <span class="co"># fetch remote changes</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="fu">git</span> checkout <span class="op">&lt;</span>NAME<span class="op">&gt;</span>        <span class="co"># switch back to your branch</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="fu">git</span> merge master           <span class="co"># fetch changes from main/master</span></a></code></pre></div>
<p>(You can use <code>rebase</code> instead of <code>merge</code> if your branch is local and hasn’t been pushed to GitHub, but <code>merge</code> if your branch is already pushed.)</p>
</section>
<section id="process-for-using-ec2-instance" class="level2">
<h2>Process for Using EC2 Instance</h2>
<p>A reason to use Amazon Elastic Compute Cloud (EC2) is having insufficient computing power in your local machine. The steps to do are as follows. The generated key is of the form user@hostname.</p>
<ol type="1">
<li>Make changes in local Docker</li>
<li><code>git push</code> in local Docker</li>
<li>Run <code>scripts/ssh-install.sh ~/.ssh/id_rsa &lt;hostname&gt;</code> in cloned pash repository on local machine (pulls changes from GitHub)</li>
<li>Run <code>ssh &lt;SSH Key&gt;</code>. The changes will have automatically been transferred over. Can confirm with <code>git log</code>.</li>
</ol>
</section>
        </div>  <!-- /.container -->
        <footer>
            <table border="0" class="foot">
                <tr class="foot">
                    <td align="left" class="foot">
                        version <a href="http://github.com/binpash/pash/releases/tag/v0.8">0.8</a> | revision <a href="http://github.com/binpash/pash"> 5eac7b9 </a> | Merge pull request #562 from binpash/future | Updated: 00:33
05/29/2022
                    </td>
                    <td align="right" class="foot">
                        <a href="http://status.binpa.sh"><img src="https://img.shields.io/badge/status-OK-red.svg?style=flat" alt="Status OK"></a>
                    </td>
                </tr>
                <tr class="foot">
                    <td align="left" class="foot">
                        <br>
                        Copyright PaSh Project a Series of LF Projects, LLC. For website
                        terms of use, privacy policy, trademark <br>guidelines and other policies 
                        please see <a href="https://www.lfprojects.org/policies/">www.lfprojects.org/policies/</a>.
                    </td>
                </tr>

            </table>
        </footer>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
                 
        <script type="text/javascript" src="../../utils/fbox/jquery.fancybox.js?v=2.1.5"></script>
        <script type="text/javascript" src="../../utils/fbox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
        <script type="text/javascript" src="../../utils/fbox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
         <script src="../../utils/js/main.js"></script>
            </body>
</html>
